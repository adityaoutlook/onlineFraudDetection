<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <meta charset="UTF-8">
    <title>Transaction History</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button onclick="window.location.href='dashboard.html'" style="position:fixed;top:14px;left:12px;width:28px;height:28px;background:#d32f2f;color:#fff;border:none;border-radius:6px;cursor:pointer;z-index:100;font-size:1rem;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 6px rgba(0,0,0,0.08);">&#8592;</button>
    <header style="text-align:center;margin-top:2.5rem;">
        <i class="fas fa-history" style="font-size:2.2rem;color:#0057b8;margin-bottom:0.5rem;"></i>
        <h1 style="font-size:1.3rem;color:#0a2342;font-weight:700;margin-bottom:0.2rem;">Transaction History</h1>
        <p style="color:#272525;font-size:0.98rem;">Review your recent payments and activity.</p>
    </header>
    <main style="font-size:0.95rem;display:flex;justify-content:center;align-items:center;min-height:60vh;">
        <div style="background:#fff;border-radius:12px;box-shadow:0 2px 16px #0057b81a;padding:2rem 1.5rem;max-width:400px;width:100%;">
            <table id="transactionsTable" style="width:100%;border-collapse:collapse;">
                <thead>
                    <tr style="background:#f4f8fb;"><th>Date</th><th>Amount</th><th>Type</th><th>Recipient/Bank</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </main>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
        const transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
        const tbody = document.getElementById('transactionsTable').querySelector('tbody');
        const userTx = transactions.filter(t => t.username === user.username);
        const last10Tx = userTx.slice(-10).reverse();
        tbody.innerHTML = last10Tx.map(t => {
            let type, info, color;
            if (t.status === 'Paid') {
                type = 'Make Payment';
                info = t.to ? `To: ${t.to}` : '';
                color = '#e3f2fd';
            } else if (t.status === 'AddFunds') {
                type = 'Add Funds';
                info = t.bank ? `Bank: ${t.bank}` : '';
                color = '#e8f5e9';
            } else {
                type = t.status;
                info = '';
                color = '#fff';
            }
            return `<tr style=\"background:${color};\"><td>${t.date}</td><td>â‚¹${t.amount}</td><td>${type}</td><td>${info}</td></tr>`;
        }).join('');
    });
    </script>
</body>
</html>
